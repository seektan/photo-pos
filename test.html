<div id="container" style="width:500px; height:300px"></div>

<pre id="img_exif"></pre>
<pre id="img1_exif"></pre>
<pre id="img2_exif"></pre>
<img src="./test.jpg" id="img" width="200" />
<img src="./test1.jpg" id="img1" width="200" />
<img src="./test2.jpg" id="img2" width="200" />

<script src="https://cdn.jsdelivr.net/npm/exifr/dist/lite.umd.js"></script>
<script>
var defaultPos = null;
function init() {
    if (!defaultPos) return;
  var myLatlng = new qq.maps.LatLng(defaultPos[0], defaultPos[1]);
  var myOptions = {
    zoom: 8,
    center: myLatlng,
    mapTypeId: qq.maps.MapTypeId.ROADMAP
  }
  var map = new qq.maps.Map(document.getElementById("container"), myOptions);
  
}
 
function loadScript() {
  var script = document.createElement("script");
  script.type = "text/javascript";
  script.src = "https://map.qq.com/api/js?v=2.exp&key=D3SBZ-M37KQ-IU55Z-GZ45Q-6GBCV-OYB34&callback=init";
  document.body.appendChild(script);
}
 
window.onload = function () {
    getExif('img');
    getExif('img1');
    getExif('img2');
}

function getExif(photoId) {
    var img = document.getElementById(photoId);
    window.exifr.gps(img, ['CreateDate', 'latitude', 'longitude']).then(function(exif){
        document.getElementById(photoId + "_exif").innerHTML = JSON.stringify(exif, null, "\t");
        if (photoId === 'img') {
            defaultPos = [exif.latitude, exif.longitude];
            loadScript();
        }
    });
}
</script>
